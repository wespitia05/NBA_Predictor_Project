<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NBA Predictor Project Players Stats Page</title>
    <!-- link to the css file in static folder -->
    <link rel="stylesheet" href="{{url_for('static', filename='player_stats.css')}}">
    <!-- link to the js file in the static folder -->
    <script src="{{url_for('static', filename='player_stats.js')}}"></script>
</head>
<body>
    <header>
        <!-- wrap player name and headshot in container-->
        <div class="player-name-photo">
            <!-- headshot -->
            <img 
                class="player-photo"
                src="{{ headshot_url }}"
                alt="{{ player_name }} headshot"
                onerror="this.onerror=null; this.src='https://cdn.nba.com/headshots/nba/latest/260x190/{{ player_id }}.png';"
            />
            <div class="player-info">
                <!-- player name -->
                <h1>{{ player_name }}</h1>
                <div class="player-team-info">
                    <span>{{ team_name }}</span>
                    <span>&nbsp;|&nbsp;</span>
                    <span>{{ jersey }}</span>
                    <span>&nbsp;|&nbsp;</span>
                    <span>{{ position }}</span>
                </div>
            </div>
        </div>
    </header>

    <!-- player info/averages -->
    <section class="stat-grid">
        <div class="stat-card">
            <div class="sub-one">
                <div class="stat-label">PPG</div>
                <div class="stat-value">{{ '%.2f' % ppg if ppg is not none else 'N/A' }}</div>
            </div>
            <div class="sub-two">
                <div class="stat-label">RPG</div>
                <div class="stat-value">{{ '%.2f' % rpg if rpg is not none else 'N/A' }}</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="sub-one">
                <div class="stat-label">APG</div>
                <div class="stat-value">{{ '%.2f' % apg if apg is not none else 'N/A' }}</div>
            </div>
            <div class="sub-two">
                <div class="stat-label">TPG</div>
                <div class="stat-value">{{ '%.2f' % tpg if tpg is not none else 'N/A' }}</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="sub-one">
                <div class="stat-label">HEIGHT</div>
                <div class="stat-value">{{ height }}</div>
            </div>
            <div class="sub-two">
                <div class="stat-label">AGE</div>
                <div class="stat-value">{{ age }} years</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="sub-one">
                <div class="stat-label">WEIGHT</div>
                <div class="stat-value">{{ weight }} lbs</div>
            </div>
            <div class="sub-two">
                <div class="stat-label">EXPERIENCE</div>
                <div class="stat-value">{{ experience }} years</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="sub-one">
                <div class="stat-label">COUNTRY</div>
                <div class="stat-value">{{ country }}</div>
            </div>
            <div class="sub-two">
                <div class="stat-label">DRAFT</div>
                <div class="stat-value">{{ draft_text }}</div>
            </div>
        </div>
        <div class="stat-card">
            <div class="sub-one">
                <div class="stat-label">COLLEGE</div>
                <div class="stat-value">{{ college }}</div>
            </div>
            <div class="sub-two">
                <div class="stat-label">BIRTHDATE</div>
                <div class="stat-value">{{ birthdate }}</div>
            </div>
        </div>
    </section>

    <!-- this section will display the teams upcoming games -->
    <section class="upcoming-games">
        <h2>Upcoming Games</h2>
        {% if upcoming_games and upcoming_games|length > 0 %}
            <table style="width:100%; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Matchup</th>
                        <th>Season Type</th>
                        <th>Home/Away</th>
                        <th>Arena</th>
                        <th>Week</th>
                    </tr>
                </thead>
                <tbody>
                    {% for g in upcoming_games %}
                    <tr>
                        <td>{{ g.date }}</td>
                        <td>{{ g.time_et }}</td>
                        <td>
                            <a href="{{ url_for('player_game_page', player_id=player_id, game_id=g.game_id) }}" class="game-link">
                              {{ g.away_abbr }} @ {{ g.home_abbr }}
                            </a>
                        </td>
                        <td>{{ g.game_type }}</td>
                        <td>{{ "Home" if g.is_home else "Away" }}</td>
                        <td>{{ g.arena }}</td>
                        <td>{{ g.notes }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <em>No scheduled games found yet.</em>
        {% endif %}
    </section>

    <!-- player last 5 games stats -->
    {% if player_recent_games and player_recent_games|length > 0 %}
    <section class="recent-games">
        <h2>Last 5 Games</h2>
        <table class="games-table">
            <thead>
                <tr>
                    <th>Date</th><th>Matchup</th><th>Season Type</th><th>W/L</th><th>MIN</th>
                    <th>PTS</th><th>REB</th><th>AST</th><th>STL</th><th>BLK</th><th>TOV</th>
                    <th>FG%</th><th>3P%</th><th>FT%</th><th>+/-</th>
                </tr>
            </thead>
            <tbody>
                {% for g in player_recent_games %}
                <tr>
                    <td>{{ g['Game Date'] }}</td>
                    <td>{{ g['Matchup'] }}</td>
                    <td>{{ g['Season Type'] }}</td>
                    <td>{{ g['W/L'] }}</td>
                    <td>{{ g['MIN'] }}</td>
                    <td>{{ g['PTS'] }}</td>
                    <td>{{ g['REB'] }}</td>
                    <td>{{ g['AST'] }}</td>
                    <td>{{ g['STL'] }}</td>
                    <td>{{ g['BLK'] }}</td>
                    <td>{{ g['TOV'] }}</td>
                    <td>{{ g['FG%'] }}</td>
                    <td>{{ g['3P%'] }}</td>
                    <td>{{ g['FT%'] }}</td>
                    <td>{{ g['+/-'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
    {% endif %}

    <!-- footer -->
    <footer>
        <p>&copy; 2025 Courtside Predictor - Built with Flask</p>
    </footer>
</body>
</html>